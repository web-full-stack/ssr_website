---
title: 第一天 1-3 指令
date: 2019-08-06 03:00:00
tags:
categories: 公司vue技术培训
---

## 指令

- 解释：指令 (Directives) 是带有 `v-` 前缀的特殊属性
- 作用：当表达式的值改变时，将其产生的连带影响，响应式地作用于 DOM

### 常用指令

- v-if  v-else
- v-show
- v-for
- v-text  v-html
- v-on
- v-model
- v-bind

### v-if v-else v-show 指令

- 作用：用来判断是否加载html的DOM

```vue
<div v-if="isLogin">你好，Vue</div>
```

### v-show

- 作用：用来判断是否显示html的DOM
- 解释：调整css中display属性，DOM已经加载，只是CSS控制没有显示出来

```vue
<div v-show="isLogin">你好，Vue</div>
```

### v-if  和 v-show的区别： 

- v-if： 动态的向DOM树内添加或者删除DOM元素，可以减轻页面渲染压力，在需要时加载，有更高的切换消耗。
- v-show：调整css dispaly属性控制显隐，可以使客户端操作更加流畅，有更高的初始渲染消耗。
- 如果需要非常频繁地切换，则使用 v-show 较好；如果在运行时条件很少改变，则使用 v-if 较好。

### v-for

- 作用：基于源数据多次渲染元素或模板块
- 说明：v-for指令是循环渲染一组data中的数组，v-for 指令需要以 item in items 形式的特殊语法，items 是源数据数组并且item是数组元素迭代的别名。

```vue
<!-- 基础用法 -->
<div id="app">
  <ul>
    <li v-for="item in items">
      {{item}}
    </li>
  </ul>
</div>

<script type="text/javascript">
  var app=new Vue({
    el:'#app',
    data:{
      items:[20,23,18,65,32,19,54,56,41]
    }
  })
</script>
```

```vue
<!-- 对象循环输出 -->
<!-- item 为当前项，index 为索引 -->
<div id="app">
  <ul>
   <li v-for="(item, index) in students" :key="item.name">
       {{item.name}} - {{item.age}}
   </li>
	</ul>
</div>

<script type="text/javascript">
  var app=new Vue({
    el:'#app',
    data:{
      students:[
        {name:'jspang',age:32},
        {name:'Panda',age:30},
        {name:'PanPaN',age:21},
        {name:'King',age:45}
      ]
    }
  })
</script>
```

### v-for 的 key属性

- 推荐：使用 `v-for` 的时候提供 `key` 属性，以获得性能提升。
- 说明：使用 key，VUE会基于 key 的变化重新排列元素顺序，并且会移除 key 不存在的元素。
- 官方解释：当 Vue.js 用 v-for 正在更新已渲染过的元素列表时，它默认用“就地复用”策略。如果数据项的顺序被改变，Vue 将不会移动 DOM 元素来匹配数据项的顺序， 而是简单复用此处每个元素，并且确保它在特定索引下显示已被渲染过的每个元素。

为了给 Vue 一个提示，以便它能跟踪每个节点的身份，从而重用和重新排序现有元素，你需要为每项提供一个唯一 key 属性。理想的 key 值是每项都有的且唯一的 id。

### v-on

- 作用：绑定事件
- 语法：`v-on:click="say"` or `v-on:click="say('参数', $event)"`
- 说明：v-on 就是监听事件，可以用v-on指令监听DOM事件来触发一些javascript代码

```vue
<!-- 完整语法 -->
<a v-on:click="doSomething"></a>
<!-- 缩写 -->
<a @click="doSomething"></a>
<!-- 方法传参 -->
<a @click="doSomething('123')"></a>
 <script>
    // 2 创建 Vue 的实例对象
    var vm = new Vue({
      el: '#app',
      // methods属性用来给vue实例提供方法（事件）
      methods: {
        doSomething: function(str) {
          //接受参数，并输出
          console.log(str);
        }
      }
    })
  </script>
```

### 事件修饰符

- `.stop` 阻止冒泡，调用 event.stopPropagation()
- `.prevent` 阻止默认事件，调用 event.preventDefault()
- `.capture` 添加事件侦听器时使用事件`捕获`模式
- `.self` 只当事件在该元素本身（比如不是子元素）触发时触发回调
- `.once` 事件只触发一次

### v-model

- 作用：在表单元素上创建双向数据绑定
- 说明：监听用户的输入事件以更新数据

```vue
<!-- 一个最简单的双向数据绑定代码 -->
<div id="app">
    <p>原始文本信息：{{message}}</p>
    <h3>文本框</h3>
    <p><input type="text" v-model="message"></p>
</div>

<script>
var app = new Vue({
  el:'#app',
  data:{
       message:'hello Vue!'
  }
})
</script>
```

### 修饰符

- .lazy：取代 input事件 监听 change 事件。
- .number：输入字符串转为数字。
- .trim：输入去掉首尾空格。

## v-bind 指令

- 说明：当表达式的值改变时，将其产生的连带影响，响应式地作用于 DOM
- 语法：`v-bind:title="msg"`
- 简写：`:title="msg"`

```vue
<!-- 完整语法 -->
<a v-bind:href="url"></a>
<!-- 缩写 -->
<a :href="url"></a>
<script>
// 2 创建 Vue 的实例对象
var vm = new Vue({
  // el 用来指定vue挂载到页面中的元素，值是：选择器
  // 理解：用来指定vue管理的HTML区域
  el: '#app',
  // 数据对象，用来给视图中提供数据的
  data: {
      url: 'http://www.baidu.com'
    }
})
</script>
```

### 绑定CSS样式 class style

- 说明：这两个都是HTML元素的属性，使用`v-bind`，只需要通过表达式计算出字符串结果即可
- 表达式的类型：字符串、数组、对象

在工作中我们经常使用v-bind来绑定css样式：

在绑定CSS样式是，绑定的值必须在vue中的data属性中进行声明。

 1、直接绑定class样式

```vue
<div :class="className">1、绑定classA</div>
```

2、绑定classA并进行判断，在isOK为true时显示样式，在isOk为false时不显示样式。

```vue
<div :class="{classA:isOk}">2、绑定class中的判断</div>
```

3、绑定class中的数组

```vue
<div :class="[classA,classB]">3、绑定class中的数组</div>
```

4、绑定class中使用三元表达式判断

```vue
<div :class="isOk?classA:classB">4、绑定class中的三元表达式判断</div>
```

5、绑定style

```vue
<div :style="{color:red,fontSize:font}">5、绑定style</div>
```

6、用对象绑定style样式

```vue
<div :style="styleObject">6、用对象绑定style样式</div>
<script>
 var app = new Vue({
   el:'#app',
   data:{
    styleObject:{
      fontSize:'24px',
     	 color:'green'
      }
    }
 })
</script>

```



## 其他指令（很少用）

### 提升用户体验：v-cloak

- 在vue渲染完指定的整个DOM后才进行显示。它必须和CSS样式一起使用。
- 防止刷新页面，网速慢的情况下出现{{ message }}等数据格式

```vue
<div v-cloak>
  {{ message }}
</div>
<style>
  
[v-cloak] {
  display: none;
}
</style>
```

### 提升性能：v-pre

- 说明：跳过这个元素和它的子元素的编译过程。可以用来显示原始 Mustache 标签。跳过大量没有指令的节点会加快编译。

```vue
<span v-pre>{{ this will not be compiled }}</span>
```

### 提升性能：v-once

- 说明：只渲染元素和组件一次。随后的重新渲染，元素/组件及其所有的子节点将被视为静态内容并跳过。这可以用于优化更新性能。

```vue
<span v-once>This will never change: {{msg}}</span>
```


