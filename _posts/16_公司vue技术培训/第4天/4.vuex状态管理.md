---
title: 第四天 4-4 路由 vuex状态管理
date: 2019-08-09 04:00:00
tags:
categories: 公司vue技术培训
column_id: 16
---

vuex 是一个专门为 vue.js 设计的集中式状态管理架构。

状态？我把它理解为在 data 中的属性需要共享给其他 vue 组件使用的部分，就叫做状态。

简单的说就是 data 中需要共用的属性。

比如：我们有几个页面要显示用户名称和用户等级。如果我们不把这些属性设置为状态，那每个页面遇到后，都会到服务器进行查找计算，返回后再显示，或者通过组件传值一层层传递数据，这显然是不合理的。在中大型项目中会有很多共用的数据，所以 vuex 就产生了。

#### 使用 vuex

```javascript
// 1. store.js 配置数据仓库实例
import Vue from "vue";
import Vuex from "vuex";

Vue.use(Vuex);

export default new Vuex.Store({
  // 状态 vue data
  state: {
    count: 0,
  },
  // 变化
  mutations: {
    countAdd(state, data) {
      console.log("vuex 收到通知", data);
      state.count++;
    },
  },
  actions: {},
});
```

```javascript
// 1.main.js 引入 并 使用
import store from "./store";

new Vue({
  router,
  store,
  render: (h) => h(App),
}).$mount("#app");
```

#### state 访问状态对象

访问状态对象，它就是我们 Vue 程序中的共享值。

```javascript
// 通过computed的计算属性直接赋值
computed:{
  count(){
    return this.$store.state.count;
  }
}
```

#### Mutations 修改状态

Vuex 提供了`commit`方法来修改状态

```javascript
# vuex 添加 修改数据的事件方法
// 变化
mutations: {
  // vuex 定义修改数据的方法
  countAdd(state,data){
    console.log('vuex 收到通知', data)
    state.count++
  }
}
```

```javascript
# 组件 $store.commit('事件',{参数})
methods:{
  //按钮事件
  countAdd(){
    //可行  不推荐 不可追踪数据变化
    // this.$store.state.count++
    //可行 推荐 可追踪数据变化 数据变化统一交给vuex管理
    this.$store.commit('countAdd','点击了add按钮')
  }
}
```
